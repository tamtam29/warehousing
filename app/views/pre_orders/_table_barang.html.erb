<div class="form-group">
  <div class="row">
    <div class="col-md-5">
      <%= form_tag new_pre_order_path, method: "GET", remote: true do %>
      <div class="input-group input-group-sm">
        <span class="input-group-addon radius"><span class="glyphicon glyphicon-search"></span></span>
        <%= text_field_tag :name, params[:name], class: "form-control", placeholder: "Cari berdasarkan kode atau nama barang" %>
        <span class="input-group-btn">
          <%= submit_tag "Cari", class: "btn btn-default radius" %>
        </span>
      </div>
      <% end %>
    </div>
  </div>
</div>
<table class="table table-striped table-hover table-bordered barang">
<thead>
  <tr>
    <th width="15%">Kode Barang</th>
    <th>Barang</th>
    <th width="10%">Stok</th>
    <th width="20%">Harga (Rp.)</th>
    <th width="12%">Disc (Rp.)</th>
    <th width="12%">Pre Order (%)</th>
  </tr>
</thead>
<tbody>
  <% @stocks.each do |stock| %>
    <tr ondblclick="tambahBarang('<%= stock.id %>');">
      <td align="center"><%= stock.barang.code %></td>
      <td><%= stock.barang.name %></td>
      <td align="right"><%= stock.jumlah.to_s + " " + stock.barang.unit.name %></td>
      <td align="right"><%= add_delimiter(stock.barang.harga) %></td>
      <% if stock.barang.promo %>
        <td align="right"><%= stock.barang.promo.disc.to_s + " / " + stock.barang.promo.threshold_qty.to_s + " Barang" %></td>
      <% else %>
        <td align="right">-</td>
      <% end %>
      <td align="right"><%= stock.barang.min_bayar_po %></td>
    </tr>
  <% end %>
</tbody>
</table>
<div align="right"><%= paginate @stocks, remote: true %></div>

<script>
  $(document).ready(function(){
    var tableBarangSize = $('.barang tbody tr').length;
    if (tableBarangSize == 0){
      $('.barang').hide();
    } else {
      $('.barang').show();
    }
  });
</script>